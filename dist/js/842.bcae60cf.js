"use strict";(self["webpackChunkblog"]=self["webpackChunkblog"]||[]).push([[842],{842:function(t,e,n){n.r(e),n.d(e,{default:function(){return O}});var o=n(3396),l=n(9242),i=n(4870),a=n(1020),s=n(2239),d=n(4287),r=n(3029),c=n(3245);const u=(0,a.Q_)("noteStore",{state:()=>({notes:[],notesWithCorrespondingTitle:[],isAddingOrDeleting:!1}),getters:{},actions:{async fetchNotes(){try{const t=await(0,d.PL)(s.iJ);this.notes=t.docs.map((t=>({...t.data(),id:t.id})))}catch(t){console.log(t.message)}},async fetchNotesWithCorrespondingTitle(t){const e=(0,c.N)();await e.fetchBlogs(),await e.fetchBlog(t),this.notesWithCorrespondingTitle=this.notes.filter((t=>t.blogTitle===e.blog.title))},async addNote(t){const e=(0,c.N)();await(0,d.ET)(s.iJ,{title:t.title,note:t.note,blogTitle:e.blog.title,id:(0,r.Z)()})},async deleteNote(t){await(0,d.oe)((0,d.JU)(s.db,"notes",t))},finishAddingOrDeleting(){this.isAddingOrDeleting=!this.isAddingOrDeleting}}});var g=n(2483);const p=t=>((0,o.dD)("data-v-d3d16086"),t=t(),(0,o.Cn)(),t),_=p((()=>(0,o._)("label",{for:"title"},"Title",-1))),h=p((()=>(0,o._)("label",{for:"note"},"note",-1))),v=p((()=>(0,o._)("button",null,"Add",-1)));var m={__name:"AddNote",setup(t){const e=(0,g.yj)(),n=u(),a=(0,i.iH)(!1),s=(0,i.qj)({title:"",note:"",id:null}),d=()=>{n.addNote(s),s.title="",s.note="",a.value=!1,n.fetchNotesWithCorrespondingTitle(e.params.id),n.fetchNotes()},r=()=>{a.value=!a.value};return(t,e)=>((0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("button",{class:"add-new-note",onClick:r},"add a note"),a.value?((0,o.wg)(),(0,o.iD)("form",{key:0,class:"add-note",onSubmit:(0,l.iM)(d,["prevent"])},[_,(0,o.wy)((0,o._)("input",{type:"text",name:"title","onUpdate:modelValue":e[0]||(e[0]=t=>s.title=t),required:""},null,512),[[l.nr,s.title]]),h,(0,o.wy)((0,o._)("textarea",{name:"note",id:"note",cols:"40",rows:"15","onUpdate:modelValue":e[1]||(e[1]=t=>s.note=t),required:""},null,512),[[l.nr,s.note]]),v],32)):(0,o.kq)("",!0)],64))}},b=n(89);const f=(0,b.Z)(m,[["__scopeId","data-v-d3d16086"]]);var w=f,N=n(7139);const y={class:"all-notes"},C=["onClick"];var D={__name:"SingleNote",setup(t){const e=(0,g.yj)(),n=u();(0,o.bv)((()=>{n.fetchNotes(),n.fetchNotesWithCorrespondingTitle(e.params.id)}));const l=t=>{n.deleteNote(t),n.fetchNotesWithCorrespondingTitle(e.params.id),n.fetchNotes()};return(t,e)=>((0,o.wg)(),(0,o.iD)("div",y,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,i.SU)(n).notesWithCorrespondingTitle,(t=>((0,o.wg)(),(0,o.iD)("div",{class:"note",key:t.id},[(0,o._)("h5",null,(0,N.zw)(t.title),1),(0,o._)("p",null,(0,N.zw)(t.note),1),(0,o._)("p",null,(0,N.zw)(t.blogTitle),1),(0,o._)("button",{onClick:e=>l(t.id)},"delete",8,C)])))),128))]))}};const T=(0,b.Z)(D,[["__scopeId","data-v-51635056"]]);var k=T;n(560);const U=t=>((0,o.dD)("data-v-0df71a31"),t=t(),(0,o.Cn)(),t),W=U((()=>(0,o._)("label",{for:"title"},"Title",-1))),S=U((()=>(0,o._)("label",{for:"content"},"Content",-1))),x=U((()=>(0,o._)("button",null,"Update",-1)));var A={__name:"EditBlog",setup(t){const e=(0,g.yj)(),n=(0,g.tv)(),s=(0,c.N)(),{blog:d}=(0,a.Jk)(s);(0,o.bv)((()=>{s.fetchBlog(e.params.id)}));const r=()=>{s.updateBlog(e.params.id),n.push({name:"blog",params:{id:e.params.id}})};return(t,e)=>((0,o.wg)(),(0,o.iD)("form",{class:"edit-blog",onSubmit:(0,l.iM)(r,["prevent"])},[W,(0,o.wy)((0,o._)("input",{type:"text",name:"title","onUpdate:modelValue":e[0]||(e[0]=t=>(0,i.SU)(d).title=t)},null,512),[[l.nr,(0,i.SU)(d).title]]),S,(0,o.wy)((0,o._)("textarea",{name:"context",id:"context",cols:"50",rows:"30","onUpdate:modelValue":e[1]||(e[1]=t=>(0,i.SU)(d).content=t)},null,512),[[l.nr,(0,i.SU)(d).content]]),x],32))}};const B=(0,b.Z)(A,[["__scopeId","data-v-0df71a31"]]);var V=B;const Z={class:"edit-blotes"},j={class:"notes"},q={class:"blog"};var I={__name:"BlogEditView",setup(t){return(t,e)=>((0,o.wg)(),(0,o.iD)("div",Z,[(0,o._)("div",j,[(0,o.Wm)(w),(0,o.Wm)(k)]),(0,o._)("div",q,[(0,o.Wm)(V)])]))}};const J=(0,b.Z)(I,[["__scopeId","data-v-79a4f953"]]);var O=J}}]);
//# sourceMappingURL=842.bcae60cf.js.map